# Milestone v1.0: MVP

**Status:** SHIPPED 2026-01-16
**Phases:** 1-4
**Total Plans:** 17

## Overview

Build a network discovery tool that collects hosts from MikroTik/Proxmox/scans, correlates them by MAC to switch ports, and pushes to NetBox with DNS updates. Foundation → Discovery → Review UI → Push.

## Phases

### Phase 1: Foundation

**Goal**: Project structure with working CLI shell and config loading
**Depends on**: Nothing (first phase)
**Requirements**: CONF-01, CONF-02, CONF-03, DATA-01
**Plans**: 3 plans

Plans:

- [x] 01-01: Project Structure + CLI Shell
- [x] 01-02: Configuration System
- [x] 01-03: Database Foundation

**Success Criteria:**

1. `netbox-auto --help` displays available commands
2. Config file is loaded and validated on startup
3. SQLite database is created on first run
4. Missing config results in helpful error message

### Phase 2: Discovery

**Goal**: Collect hosts from all sources and correlate by MAC
**Depends on**: Phase 1
**Requirements**: DISC-01, DISC-02, DISC-03, DISC-04, DISC-05, DATA-02, DATA-03, CLI-01
**Plans**: 5 plans

Plans:

- [x] 02-01: Collector Framework + DHCP Collector
- [x] 02-02: Proxmox Collector
- [x] 02-03: Network Scanner
- [x] 02-04: Switch MAC Collector
- [x] 02-05: Discovery Orchestration + CLI

**Success Criteria:**

1. `netbox-auto discover` pulls DHCP leases from MikroTik
2. `netbox-auto discover` pulls VMs from Proxmox
3. `netbox-auto discover` scans subnets for static IPs
4. `netbox-auto discover` queries switch MAC tables
5. Hosts from different sources are merged by MAC in staging DB

### Phase 3: Review

**Goal**: Web UI to review, classify, and approve hosts
**Depends on**: Phase 2
**Requirements**: REVW-01, REVW-02, REVW-03, REVW-04, REVW-05, CLI-02, NBRC-01, NBRC-02, NBRC-03, NBRC-04
**Plans**: 5 plans

Plans:

- [x] 03-01: Flask Web Application Setup
- [x] 03-02: Host Actions (approve/reject/classify/bulk)
- [x] 03-03: NetBox API Client
- [x] 03-04: Host Review UI
- [x] 03-05: NetBox Comparison

**Success Criteria:**

1. `netbox-auto serve` starts web UI accessible at localhost
2. User sees all discovered hosts in a table view
3. User can approve/reject individual hosts
4. User can classify hosts by type (server/workstation/IoT/network)
5. User can compare discovered hosts with NetBox inventory

### Phase 4: Push

**Goal**: Push approved hosts to NetBox and update DNS
**Depends on**: Phase 3
**Requirements**: OUTP-01, OUTP-02, OUTP-03, OUTP-04, CLI-03, CLI-04
**Plans**: 4 plans

Plans:

- [x] 04-01: NetBox Push Methods (device/VM/cable/IP creation)
- [x] 04-02: DNS Push Module (SSH + Unbound)
- [x] 04-03: Push CLI + Dry-run (orchestration)
- [x] 04-04: Status Command

**Success Criteria:**

1. `netbox-auto push` creates NetBox devices/VMs for approved hosts
2. `netbox-auto push` creates cable records linking switches to devices
3. `netbox-auto push` updates Unbound DNS via SSH
4. `netbox-auto status` shows discovery/push status summary
5. Dry-run mode previews changes without pushing

---

## Milestone Summary

**Key Decisions:**

- Used typer[all] for CLI framework with rich output
- src/ layout for package structure
- Python 3.11+ minimum version
- SQLAlchemy 2.0 style with Mapped and mapped_column
- MAC address as unique correlation key for hosts
- Protocol over ABC for Collector interface (duck-typing)
- Lazy scapy import to avoid ImportError when not installed
- Hostname priority in merge: dhcp > proxmox > scan
- Continue if one collector fails, log errors
- Lazy connection for NetBox client
- Match hosts to NetBox by IP address comparison
- Generate placeholder MACs for imported NetBox devices (00:nb:XX format)
- Push methods raise on failure (vs read methods fail gracefully)
- paramiko for SSH (simpler than asyncssh for synchronous DNS push)
- Dry-run mode logs actions without mutations

**Issues Resolved:**

- None (clean execution)

**Issues Deferred:**

- Test implementations (deferred to v2)
- NetBox config IDs hardcoded (by design, environment-specific)

**Technical Debt Incurred:**

- tests/ has only __init__.py (no actual tests)
- NetBox push requires device_type_id, role_id, site_id, cluster_id in config

---

_Archived: 2026-01-16 as part of v1.0 milestone completion_
_For current project status, see .planning/ROADMAP.md_

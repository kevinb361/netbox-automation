---
phase: 03-review
plan: 05
type: execute
wave: 2
depends_on: ["03-01"]
files_modified: [src/netbox_auto/cli.py, src/netbox_auto/web/app.py]
autonomous: true

must_haves:
  truths:
    - "`netbox-auto serve` starts web server on localhost"
    - "User can access web UI in browser"
    - "Server runs until Ctrl+C"
  artifacts:
    - path: "src/netbox_auto/cli.py"
      provides: "serve command"
      contains: "def serve"
  key_links:
    - from: "cli.py serve"
      to: "web.app.create_app"
      via: "import and run"
      pattern: "create_app"
---

<objective>
Add CLI serve command to start web server.

Purpose: Provide simple command to start review UI.
Output: Working `netbox-auto serve` command.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-review/03-01-SUMMARY.md

@src/netbox_auto/cli.py
@src/netbox_auto/web/app.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add serve CLI command</name>
  <files>src/netbox_auto/cli.py</files>
  <action>
    1. Add serve command to CLI:
       @app.command()
       def serve(
           host: str = "127.0.0.1",
           port: int = 5000,
           debug: bool = False
       ):
    2. Import create_app from web.app
    3. Initialize database (ensure_tables)
    4. Load config (for NetBox credentials)
    5. Call flask_app.run(host=host, port=port, debug=debug)
    6. Print startup message with URL
  </action>
  <verify>netbox-auto serve --help shows options</verify>
  <done>serve command starts Flask server</done>
</task>

<task type="auto">
  <name>Task 2: Add production-ready defaults</name>
  <files>src/netbox_auto/web/app.py</files>
  <action>
    1. Add proper secret key handling:
       - Generate random key if not in config
       - Or use app.config['SECRET_KEY'] from env
    2. Configure session cookie security
    3. Add request logging to console
    4. Ensure templates auto-reload in debug mode
  </action>
  <verify>Start server, verify no security warnings</verify>
  <done>Server runs with sensible defaults</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `netbox-auto serve` starts server
- [ ] Server accessible at http://127.0.0.1:5000
- [ ] Ctrl+C stops server cleanly
</verification>

<success_criteria>

- CLI-02: `serve` command starts web UI server
- Server binds to configurable host/port
- Debug mode available for development
</success_criteria>

<output>
After completion, create `.planning/phases/03-review/03-05-SUMMARY.md`
</output>
